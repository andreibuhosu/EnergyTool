<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<link href="/css/style.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
<head>
  <meta charset="UTF-8">
  <title>Index</title>
</head>
<nav class="nav nav-pills flex-column flex-sm-row">
  <a class="flex-sm-fill text-sm-center nav-link" aria-current="page" href="/indexCustomer">Home</a>
  <a class="flex-sm-fill text-sm-center nav-link" href="/newReading">New meter reading</a>
  <a class="flex-sm-fill text-sm-center nav-link active" href="/viewBill">View bill</a>
  <a class="flex-sm-fill text-sm-center nav-link" href="/topUp">Top Up</a>
  <a class="flex-sm-fill text-sm-center nav-link" href="/logout">Logout</a>
</nav>
<body><br><br>
<div sec:authorize="isAuthenticated()">
  <p style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center">Welcome <span sec:authentication="name"  style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center" >Username</span>

    <span sec:authentication="principal.authorities" style="font-size: 30px ;font-family: 'Academy Engraved LET' ; text-align: center ;color: #ff9904">Roles</span> </p>
  &nbsp;


</div><br>

<p style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center; align-content: center">Here you can view your bills</p>


<div style="text-align: center;font-size: 30px ;font-family: 'Academy Engraved LET' ;color: red; text-align: center" th:if="${errorMessage}" th:text="${errorMessage}"/>
<div style="text-align: center;font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #d5d32c; text-align: center" th:if="${errorUsed}" th:text="${errorUsed}"/>
<div style="text-align: center;font-size: 30px ;font-family: 'Academy Engraved LET' ;color: green; text-align: center" th:if="${successMessage}" th:text="${successMessage}"/>



<table class="table table-hover">
  <thead style="color: #3498db; align-content: center">
  <tr>
    <th style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center">Email</th>
    <th style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center">Date</th>
    <th style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center">Amount</th>
    <th style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center">Status</th>
    <th style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: black; text-align: center"></th>


  </tr>
  </thead>
  <tbody>
  <tr th:each="listb : ${listb}">
    <td th:text="${listb.meterReading.user.username}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center"></td>
    <td th:text="${listb.meterReading.date}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center"></td>
    <td   step="0.01"  th:text="'£'+${listb.finalBill}"style="font-size: 30px ;font-family: 'Academy Engraved LET'  ;color: #11caf0; text-align: center"></td>
    <td th:text="${listb.paid}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center"></td>
<!--    <td th:text="'£'+${prices.gasPrice}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center"></td>-->
<!--    <td th:text="'£'+${prices.standingCharge}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #11caf0; text-align: center"></td>-->
    <td>
      <a th:href="@{'/pay/' + ${listb.id}}" style="font-size: 30px ;font-family: 'Academy Engraved LET' ;color: red; text-align: center">Pay</a>
    </td>

  </tr>
  </tbody>


</table>

<!--<div style="text-align: center;font-size: 30px ;font-family: 'Academy Engraved LET' ;color: #d5d32c; text-align: center" th:if="${bill}" th:text="${bill}"/>-->
</body>
</html>